# Odoo 19 Enterprise Sample Setup

Готова конфігурація Odoo 19 Enterprise для швидкого розгортання з Docker Compose.

## Швидкий старт

### Варіант 1: Автоматичний запуск (рекомендовано)

```bash
./quick-start.sh
```

Скрипт автоматично:
- Створить `.env` файл з `env.example`
- Перевірить наявність Docker
- Запустить контейнери

### Варіант 2: Ручний запуск

1. **Розархівуйте папку** (якщо використовуєте архів)

2. **Налаштуйте змінні середовища**:
   ```bash
   cp env.example .env
   # Відредагуйте .env файл згідно ваших потреб
   ```

3. **Налаштуйте шлях до Enterprise модулів**:
   - Відредагуйте `.env` файл
   - Змініть `ENTERPRISE_PATH` на шлях до вашої папки з enterprise модулями
   - Або залиште `../check-files/enterprise` якщо папка знаходиться поруч

4. **Налаштуйте конфігурацію Odoo** (опціонально):
   ```bash
   # Відредагуйте config/odoo.conf
   # Змініть паролі, порти, налаштування продуктивності за потреби
   ```

5. **Запустіть Odoo**:
   ```bash
   docker-compose up -d
   # або
   docker compose up -d
   ```

6. **Відкрийте браузер**:
   - Перейдіть на `http://localhost:8069` (або інший порт, якщо змінили)
   - Створіть базу даних через веб-інтерфейс

## Структура проекту

```
odoo-sample/
├── docker-compose.yml    # Docker Compose конфігурація
├── env.example           # Приклад змінних середовища
├── quick-start.sh        # Скрипт швидкого старту
├── config/
│   └── odoo.conf        # Конфігурація Odoo
├── addons/              # Кастомні модулі Odoo
│   ├── o1c/            # Модуль інтеграції з 1C
│   ├── o1c_cron/       # Cron для експорту в 1C
│   ├── o1c_import/     # Імпорт з 1C
│   └── ...
├── utils/               # Корисні скрипти
│   ├── backup-db.sh    # Резервна копія БД
│   ├── restore-db.sh   # Відновлення БД
│   ├── reset-db.sh     # Скидання БД
│   ├── show-info.sh    # Інформація про систему
│   ├── list-modules.sh # Список модулів
│   ├── shell-web.sh    # Вхід в контейнер Odoo
│   ├── shell-db.sh     # Вхід в контейнер PostgreSQL
│   └── run-odoo-command.sh # Виконання Odoo CLI команд
├── backups/             # Резервні копії БД (створюється автоматично)
├── output/              # Результати роботи скриптів
├── logs/                # Логи Odoo (створюється автоматично)
│   └── odoo.log        # Основний лог-файл
└── README.md            # Цей файл
```

## Основні налаштування

### Змінні середовища (.env або docker-compose.yml)

- `ODOO_PORT` - Порт для доступу до Odoo (за замовчуванням: 8069)
- `DB_NAME` - Ім'я бази даних (за замовчуванням: postgres)
- `DB_USER` - Користувач бази даних (за замовчуванням: odoo)
- `DB_PASSWORD` - Пароль бази даних (за замовчуванням: odoo)
- `ENTERPRISE_PATH` - Шлях до папки з enterprise модулями
- `ADMIN_PASSWORD` - Пароль адміністратора Odoo (встановлюється в config/odoo.conf)

### Конфігурація Odoo (config/odoo.conf)

Основні параметри, які можна змінити:

- `admin_passwd` - Пароль адміністратора для операцій з базою даних
- `workers` - Кількість воркерів (за замовчуванням: 2)
- `limit_memory_hard` - Жорсткий ліміт пам'яті
- `limit_memory_soft` - М'який ліміт пам'яті
- `log_level` - Рівень логування (info, debug, warn, error)

## Модулі

Проект включає наступні кастомні модулі:

- **o1c** - Основний модуль інтеграції з 1C
- **o1c_cron** - Автоматичний експорт даних в 1C через cron
- **o1c_import** - Імпорт даних з 1C
- **o1c_contact_uuid** - UUID для контактів
- **mark_onchange** - Позначення змінених записів

## Команди Docker Compose

```bash
# Запустити контейнери
docker-compose up -d

# Переглянути логи контейнерів
docker-compose logs -f

# Зупинити контейнери
docker-compose down

# Зупинити та видалити volumes (увага: видалить дані!)
docker-compose down -v

# Перезапустити контейнери
docker-compose restart
```

## Логи Odoo

Логи Odoo автоматично зберігаються в папці `logs/` на вашому комп'ютері. Ви можете читати їх без входу в контейнер:

```bash
# Переглянути логи в реальному часі
tail -f logs/odoo.log

# Переглянути останні 100 рядків
tail -n 100 logs/odoo.log

# Пошук в логах
grep "ERROR" logs/odoo.log

# Відкрити в редакторі
nano logs/odoo.log
# або
vim logs/odoo.log
```

**Примітка:** Папка `logs/` створюється автоматично при першому запуску контейнера.

## Підтримка

Після запуску Odoo буде доступний за адресою `http://localhost:8069` (або інший порт, якщо змінили).

При першому запуску вам потрібно буде:
1. Створити базу даних через веб-інтерфейс
2. Встановити модулі через меню "Додатки"

## Корисні утиліти

Проект включає набір корисних скриптів в папці `utils/`:

### Робота з базою даних
- `./utils/backup-db.sh` - Створити резервну копію БД
- `./utils/restore-db.sh <backup_file>` - Відновити БД з резервної копії
- `./utils/reset-db.sh` - Скинути БД (для розробки)

### Інформація та моніторинг
- `./utils/show-info.sh` - Детальна інформація про систему
- `./utils/list-modules.sh` - Список всіх модулів зі статусами

### Робота з контейнерами
- `./utils/shell-web.sh` - Вхід в контейнер Odoo
- `./utils/shell-db.sh` - Вхід в контейнер PostgreSQL
- `./utils/run-odoo-command.sh <command>` - Виконання Odoo CLI команд

### Встановлення модулів
- `./utils/install-module.sh <modules> [options]` - Встановлення та оновлення модулів Odoo

### Утиліти
- `./utils/fix-permissions.sh` - Встановлення правильних прав доступу для Odoo

Детальна документація по всіх скриптах: [utils/README.md](utils/README.md)

## Примітки

- Переконайтеся, що шлях до Enterprise модулів вказаний правильно
- За потреби змініть паролі в `.env` та `config/odoo.conf`
- Для продакшн використання змініть паролі на безпечніші
- Регулярно створюйте резервні копії БД: `./utils/backup-db.sh`